<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <title>test03.html</title>
    <style>
        #container{
            width:600px;
        }
        #panel{
            width: 600px;
            height: 300px;
            border: 1px solid gray;
            background-color: antiquewhite;
            overflow: auto;
            /* padding: 5px; */
        }   
    </style>
    <script>
        'use strict';
        // let chai;
        // let boxHeight;
        // let scrollHeight;
        // let scrollTop;

        jQuery(function(){
            //초기데이터를 DB에서 가져와 Panel 레이어에 추가
            // $("#btnReset").click(function(){
           function makeData(){
                let str ='';
                for(let i=0; i<20;i++){
                    str += "<h3>content: "+(i+1)+"</h3>";
                }   
                $("#panel").append(str);

            };

            makeData();
            
            // 스크롤바를 마지막까지 이동하게되면 아래쪽으로 20개의 자료를 더 출력 시켜준다.
            $('#container #panel').on('scroll', function(){
        scrollTop = $(this).scrollTop();
        scrollHeight = $(this).prop('scrollHeight');
        boxHeight = $(this).height();

        chai = scrollHeight - scrollTop;
        
        if(chai === boxHeight) {
          $(".processing").show().delay(1000).hide(500, function(){
            makeData();
          });
        }
      });

    });

        // function scrollBottonCheck(){
        //     $('#intro').scrollTop(chai);
        // }
        // function scrollTopCheck(){
        //     $('#intro').scrollTop(0);
        // }

    </script>
</head>
<body>
    <pr><br/></pr>
    <div class="container">
        <div>
            <!-- <input type="button" value="초기 데이터 추가" class="btn btn-danger" id="btnReset" onclick="makeData()"/> -->
            <input type="button" value="영역의 처음으로 이동" class="btn btn-primary" id=btnTop onclick="scrollTopCheck()"/>
            <input type="button" value="영역의 처음으로 이동" class="btn btn-primary" id=btnTop onclick="scrollTopCheck()"/>
        </div>
        <hr/>
        <h2>자기 소개서</h2>
        <div id="intro">
            <div id="panel"></div>
            <div class="processing" style="display: none;">
                <img src="../images/processing.gif"/>
            </div>
        </div>
    </div>
    <pr><br/></pr>
</body>
</html>